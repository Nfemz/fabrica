{
  "$schema": "fabrica-ui-schema",
  "$comment": "Processing Machine GUI Layout (Macerator, Electric Furnace) - Adapt to Hytale's actual UI format",

  "id": "fabrica:processing_gui",
  "title": "Processing Machine",
  "width": 176,
  "height": 166,

  "background": {
    "texture": "Common/UI/Custom/MachineGUI_Background.png",
    "width": 176,
    "height": 166
  },

  "elements": [
    {
      "id": "title",
      "type": "dynamic_label",
      "x": 8,
      "y": 6,
      "dataBinding": "machineName",
      "color": "#404040"
    },

    {
      "id": "input_slot",
      "type": "slot",
      "x": 56,
      "y": 35,
      "width": 18,
      "height": 18,
      "slotIndex": 0,
      "slotType": "input",
      "background": "Common/UI/Custom/Slot_Background.png",
      "tooltip": "Input Slot"
    },

    {
      "id": "progress_arrow",
      "type": "progress_bar",
      "x": 80,
      "y": 35,
      "width": 24,
      "height": 16,
      "direction": "right",
      "emptyTexture": "Common/UI/Custom/ProgressArrow_Empty.png",
      "fullTexture": "Common/UI/Custom/ProgressArrow_Full.png",
      "dataBinding": "progress"
    },

    {
      "id": "output_slot",
      "type": "slot",
      "x": 112,
      "y": 35,
      "width": 18,
      "height": 18,
      "slotIndex": 1,
      "slotType": "output",
      "background": "Common/UI/Custom/Slot_Background.png",
      "tooltip": "Output Slot"
    },

    {
      "id": "energy_bar",
      "type": "progress_bar",
      "x": 152,
      "y": 8,
      "width": 16,
      "height": 52,
      "direction": "up",
      "emptyTexture": "Common/UI/Custom/EnergyBar_Empty.png",
      "fullTexture": "Common/UI/Custom/EnergyBar_Full.png",
      "dataBinding": "energyPercent"
    },

    {
      "id": "power_indicator",
      "type": "indicator",
      "x": 8,
      "y": 35,
      "width": 8,
      "height": 8,
      "offTexture": "Common/UI/Custom/PowerIndicator_Off.png",
      "onTexture": "Common/UI/Custom/PowerIndicator_On.png",
      "dataBinding": "isActive"
    },

    {
      "id": "power_label",
      "type": "label",
      "x": 8,
      "y": 55,
      "text": "Power:",
      "color": "#404040"
    },

    {
      "id": "power_value",
      "type": "dynamic_label",
      "x": 45,
      "y": 55,
      "dataBinding": "powerConsumption",
      "format": "{0} W",
      "color": "#666666"
    },

    {
      "id": "progress_label",
      "type": "label",
      "x": 8,
      "y": 67,
      "text": "Progress:",
      "color": "#404040"
    },

    {
      "id": "progress_value",
      "type": "dynamic_label",
      "x": 55,
      "y": 67,
      "dataBinding": "progressPercent",
      "format": "{0}%",
      "color": "#666666"
    },

    {
      "id": "recipe_label",
      "type": "dynamic_label",
      "x": 90,
      "y": 55,
      "dataBinding": "currentRecipe",
      "color": "#888888",
      "fontSize": 10,
      "$comment": "Shows current recipe like 'Iron Ore â†’ Iron Dust'"
    },

    {
      "id": "player_inventory",
      "type": "player_inventory",
      "x": 8,
      "y": 84,
      "slotSize": 18,
      "rows": 4,
      "cols": 9
    }
  ],

  "dataBindings": {
    "machineName": {
      "source": "machine",
      "property": "displayName",
      "type": "string"
    },
    "progress": {
      "source": "machine",
      "property": "progress",
      "type": "float",
      "range": [0.0, 1.0]
    },
    "progressPercent": {
      "source": "machine",
      "property": "progress",
      "type": "float",
      "range": [0.0, 100.0],
      "format": "%.0f"
    },
    "energyPercent": {
      "source": "machine",
      "property": "energyBufferPercent",
      "type": "float",
      "range": [0.0, 1.0]
    },
    "isActive": {
      "source": "machine",
      "property": "isActive",
      "type": "boolean"
    },
    "powerConsumption": {
      "source": "machine",
      "property": "consumptionRate",
      "type": "float"
    },
    "currentRecipe": {
      "source": "machine",
      "property": "recipeDescription",
      "type": "string",
      "$comment": "Empty string if no recipe active"
    }
  }
}
